{% extends 'base.html' %}

{% block title %}Mark Attendance{% endblock %}

{% block content %}
<div class="page-header">
    <h1>â• Mark Attendance</h1>
</div>

<div class="card" style="max-width: 700px; margin: 0 auto;">
    <p style="color: #6b7280; margin-bottom: 20px; padding: 15px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #3b82f6;">
        <strong>ğŸ’¡ Using Stored Procedure:</strong> This form uses <code>sp_mark_attendance</code> stored procedure 
        which automatically handles insert/update logic for attendance records.
    </p>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label>Event *</label>
            <select name="event" required>
                <option value="">Select Event</option>
                {% for event in events %}
                <option value="{{ event.event_id }}">{{ event.title }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label>Participant *</label>
            <select name="user" required>
                <option value="">Select User</option>
                {% for user in users %}
                <option value="{{ user.user_id }}">{{ user.name }} ({{ user.roll_no|default:"No Roll" }})</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                <input type="checkbox" name="present" checked style="width: auto;">
                Mark as Present
            </label>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn btn-primary">ğŸ’¾ Save Attendance</button>
            <a href="{% url 'attendance_list' %}" class="btn" style="background: #e5e7eb; color: #374151;">âŒ Cancel</a>
        </div>
    </form>
</div>
{% endblock %}